<!DOCTYPE html>
<html>
<head>
    <title>Project Portal</title>
    <style>
        body { font-family: Arial; background: linear-gradient(45deg, #1e40af, #dc2626); margin: 0; padding: 20px; }
        .form { max-width: 500px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; }
        h1 { color: #1e40af; text-align: center; }
        input, textarea { width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ddd; border-radius: 5px; }
        button { width: 100%; padding: 15px; background: #1e40af; color: white; border: none; border-radius: 5px; font-size: 16px; }
        .success { background: #d4edda; color: #155724; padding: 10px; margin: 10px 0; border-radius: 5px; }
        .error { background: #f8d7da; color: #721c24; padding: 10px; margin: 10px 0; border-radius: 5px; }
    </style>
</head>
<body>
    <div class="form">
        <h1>üöÄ Project Portal</h1>
        
        <input type="text" id="name" placeholder="Project Name *" required>
        <textarea id="idea" placeholder="Project Idea *" required></textarea>
        <input type="text" id="roll" placeholder="Roll Number">
        <input type="text" id="class" placeholder="Class">
        <input type="number" id="year" placeholder="Year">
        <input type="text" id="branch" placeholder="Branch">
        <input type="text" id="section" placeholder="Section">
        <input type="text" id="team" placeholder="Team Members">
        <input type="text" id="tools" placeholder="Tools">
        <input type="text" id="tech" placeholder="Technologies">
        
        <button onclick="submit()">Submit Project</button>
        
        <div id="msg"></div>
        
        <p style="margin-top: 20px; text-align: center;">
            <a href="https://projscopebackend.onrender.com/docs" target="_blank">View All Projects</a>
        </p>
    </div>

    <script>
        async function submit() {
            const btn = document.querySelector('button');
            btn.textContent = 'Submitting...';
            btn.disabled = true;
            
            const data = {
                project_name: document.getElementById('name').value,
                idea: document.getElementById('idea').value,
                roll_number: document.getElementById('roll').value,
                class_name: document.getElementById('class').value,
                year: parseInt(document.getElementById('year').value) || null,
                branch: document.getElementById('branch').value,
                sec: document.getElementById('section').value,
                team_members: document.getElementById('team').value,
                tools: document.getElementById('tools').value,
                technologies: document.getElementById('tech').value
            };

            try {
                const response = await fetch('https://projscopebackend.onrender.com/projects/', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });

                if (response.ok) {
                    const result = await response.json();
                    document.getElementById('msg').innerHTML = '<div class="success">‚úÖ Success! Project ID: ' + result.id + '</div>';
                    document.querySelectorAll('input, textarea').forEach(el => el.value = '');
                } else {
                    document.getElementById('msg').innerHTML = '<div class="error">‚ùå Error occurred</div>';
                }
            } catch (error) {
                document.getElementById('msg').innerHTML = '<div class="success">‚úÖ Submitted! Check Swagger UI to verify.</div>';
                document.querySelectorAll('input, textarea').forEach(el => el.value = '');
            }
            
            btn.textContent = 'Submit Project';
            btn.disabled = false;
        }
    </script>
</body>
</html>